`TCP / IP`

TCP/IP 는 `애플리케이션 계층`, `트랜스포트 계층`, `네트워크 계층`, `링크 계층` 이렇게 4계층으로 나뉘어 있습니다.

> - 계층화된 이유
> 인터넷이 하나의 프로토콜로 되어 있다면 사양이 변경되었을 때 전체를 바꾸지 않으면 안되지만, 계층화되어 있으면 사양이 변경된 해당 계층만 바꾸면 되기때문입니다.

`애플리케이션 계층`

- 유저에게 제공되는 애플리케이션에서 사용하는 통신의 움직을 결정합니다.
- FTP랑 DNS 등도 애플리케이션의 한 가지 입니다.
- HTTP도 이 계층에 포함됩니다.

`트랜스포트 계층`

- 애플리케이션 계층에 네트워크로 접속되어 있는 2대의 컴퓨터 사이의 데이터 흐름을 제공합니다.
- 서로 다른 성질을 가진 TCP(Transmission Control Protocol)와 UDP(User Data Protocol) 두 가지 프로토콜이 있습니다.

`네트워크 계층(혹은 인터넷 계층)`

- 네트워크 상에서 패킷의 이동을 다룹니다.

> 패킷이란 전송하는 데이터의 최소 단위입니다.

`링크 계층(혹은 데이터 링크 계층, 네트워크 인터페이스 계층)`

- 네트워크에 접속하는 하드웨어적인 면을 다룹니다.

`TCP/IP 통신의 흐름`

```java
                             클라이언트                     서버
애플리케이션 계층           HTTP 클라이언트                HTTP 서버
트랜스포트 계층                  TCP                        TCP
네트워크 계층                    IP                         IP
링크 계층                      네트워크                    네트워크

TCP/IP로 통신을 할 때 계층을 순서대로 거쳐 상대와 통신을 합니다.
송신하는 측은 애플리케이션 계층에서부터 내려가고, 수신하는 측은 애플리케이션 계층으로 올라갑니다.
각 계층을 거칠 때는 반드시 헤더로 불려지는 해당 계층마다 해당 계층에 필요한 정보를 추가합니다
반대로 수신측에서는 각 게층을 거칠 때 마다 반드시 해당 게층마다 사용한 헤더를 삭제합니다.
```

`IP/TCP/DNS`

> IP(Internet Protocal)는 계층으로 네트워크 층에 해당됩니다.
> IP의 역할은 개개의 패킷을 상대방에게 전달하는 것입니다.
> 상대방에게 전달하기까지 IP 주소와 MAC 주소(Media Access Control Address)라는 요소가 중요합니다.
> IP 주소는 각 노드에 부여된 주소를 가리키고 MAC 주소는 각 네트워크 카드에 할당된 고유의 주소입니다.
> IP 주소는 변경 가능하지만 기본적으로 MAC 주소는 변경할 수 없습니다.
> 통신은 ARP(Address Resolution Protocal)이라는 프로토콜을 이용하여 MAC 주소에서 합니다.
> ARP는 주소를 해결하기 위한 프로토콜 중 하나인데, 수신지의 IP 주소를 바탕으로 MAC 주소를 조사할 수 있습니다.

> TCP(Transfer Control Protocol)는 계층으로 말하자면 트랜스포트 층에 해당하는데, 신뢰성 있는 바이트 스트림 서비스를 제공합니다.
> 바이트 스트림 서비스는 용량이 큰 데이터를 보내기 쉽게 TCP 세그먼트라고 불리는 단위 패킷으로 작게 분해하여 관리하는 것을 말하고, 
> 신뢰성 있는 서비스는 상대방에게 보내는 서비스를 의미합니다. 
> 결국 TCP는 대용량의 데이트를 보내기 쉽게 작게 분해하여 상대에게 보내고, 정확하게 도착했는지 확인하는 역할을 담당하고 있습니다.
> TCP는 쓰리웨이 핸드셰이킹 방법을 사용하고 있습니다.
> 송신측에서 최초 `SYN` 플래그로 상대에게 접속함과 동시에 패킷을 보내고,
> 수신측에서는 `SYN` 플래그로 상대에게 접속함과 동시에 패킷을 보내고.
> 송신측이 `ACK` 플래그를 보내 패킷 교환이 완료되었음을 전합니다.
> 이 과정에서 어디선가 통신이 도중에 끊어지면 TCP는 그와 동시에 같은 수순으로 패킷을 재전송합니다.

> DNS(Domain Name System)는 HTTP와 같이 응용 계층 시스템에서 도메인 이름과 IP 주소 이름 확인을 제공합니다.
> 주로 사용자는 IP 주소 대신 www.google.com 처럼 영어나 숫자 등으로 표기해 이름을 지정하는 것이 인간에게 친숙합니다.
> 그러나 컴퓨터에게는 숫자를 나열하는 방법을 더 선호하기 떄문에 DNS를 사용합니다.
> DNS는 도메인명에서 IP 주소를 조사하거나 반대로 IP 주소로부터 도메인명을 조사하는 서비스를 제공하고 있습니다.
> ```java 
> 송신측     ->  (www.google.com 웹페이지에 접속 요청)                DNS
> 송신측     <-  (www.google.com의 IP 주소는 100.000.010.011 입니다)  DNS
> ```

`IP,TCP,DNS 가 HTTP를 이용해 통신을 할 때 하는 역할`

```java
 클라이언트가 DNS에게 도메인을 보내서 IP주소를 받습니다.
 DNS에게 받은 IP 주소로 HTTP 담당 웹 서버에 보낼 HTTP 메시지를 작성합니다.
 클라이언트의 TCP 담당이 통신하기 쉽도록 HTTP 메시지를 패킷으로 분해 조각내서 일련번호를 부여하여 웹서버에 패킷을 보냅니다
 
 IP 담당이 상대가 어디에 있는지 상대가 어디에 있는지 찾아 중계해 가면서 배송합니다
 
 웹서버의 TCP 담당이 패킷을 수신하여 도착한 패킷을 일련번호를 보고 조립합니다.
 웹서버의 HTTP 담당이 받은 리퀘스트 내용을 처리합니다.
 
리퀘스트 처리 결과도 마찬가지로 TCP/IP 통신 순서대로 클라이언트에 반환합니다.
```

```java
URI 포맷
http://     user:pass  @   www.google.com :  80      /dir/index.html  ?  uid=1     #      ch1
스키마   자격정보(크리덴셜)    서버주소      서버포트    계층적 파일 패스   쿼리 문자열   프래그먼트 식별자
- 자격정보(크리덴셜) 서버로부터 시소르를 취득하려면 자격정보(크리덴셜)가 필요합니다. 유저명과 패스워드를 지정할 수 있습니다 (옵션)
- 서버주소는 www.google.com 와 같은 DNS 이름이나 192.168.0.0과 같은 IPv4 주소나 [0:0:0:0:0:0:0:1]과 같은 IPv6 주소를 대괄호로 묶어서 지정합니다.
- 서버 포트는 접속 대상이 되는 네트워크 포트 번호를 지정합니다. 생략하면 디폴트 포트가 사용됩니다. (옵션)
- 계층적 파일 패스는 특정 리소스를 식별하기 위해서 서버 상의 파일 패스를 지정합니다.
- 쿼리 문자열은 파일 패스로 지정된 리소스에 임의의 파라미터를 넘겨주기 위해 쿼리 문자열을 사용하고 (옵션)
- 프래그먼트 식별자는 주로 취독한 리소스에서 서브 리소스(도큐먼트 중간에 위치)를 가리키기 위해서 프래그멘트 식별자가 사용됩니다. (옵션)
```
